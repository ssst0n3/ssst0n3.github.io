(function(){"use strict";var t={41859:function(t,e,n){n(66992),n(88674),n(19601),n(17727);var r=n(28935),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view",{staticClass:"ml-3"})],1)},o=[],a={name:"App",components:{}},s=a,c=n(1001),l=(0,c.Z)(s,i,o,!1,null,null,null),d=l.exports,u=n(38262),h=n(13266),f=(n(70044),n(81432)),p=(n(21278),n(92222),"/api"),m="".concat(p,"/v1"),v="node",x="node_relation",w={v1:{node:"".concat(m,"/").concat(v),node_relation:"".concat(m,"/").concat(x)}},b={BaseUrl:"/",api:{v1:{node:{node:w.v1.node,list:function(t){return"".concat(w.v1.node,"/list/").concat(t)},matrix:function(t){return"".concat(w.v1.node,"/matrix/").concat(t)},item:function(t){return"".concat(w.v1.node,"/").concat(t)}},node_relation:{node_relation:w.v1.node_relation,item:function(t){return"".concat(w.v1.node_relation,"/").concat(t)},update_node_relation_by_node:function(t){return"".concat(w.v1.node_relation,"/node/").concat(t)},hide_node:function(t){return"".concat(w.v1.node_relation,"/hide/").concat(t)}}}},directions:{up:1,left:2,down:3,right:4}},g=n(38372),k=n.n(g),_=n(12809),y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("RootNodes")],1)},Z=[],M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-btn",{on:{click:function(e){return t.$bvModal.show("modal-create-root-node")}}},[n("b-icon",{attrs:{icon:"plus"}})],1),t._l(t.nodes,(function(e){return n("div",{key:e.id},[n("router-link",{attrs:{to:"/node/"+e.ID}},[t._v(t._s(e.title))])],1)})),n("b-modal",{attrs:{id:"modal-create-root-node","hide-footer":"",size:"xl"}},[n("b-form-group",{attrs:{id:"fieldset-horizontal","label-cols-sm":"4","label-cols-lg":"3","content-cols-sm":"","content-cols-lg":"7",description:"display in summary mode",label:"Title","label-for":"input-horizontal"}},[n("b-form-input",{model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),n("p",[t._v("markdown")]),n("MarkdownEditor",{ref:"create_root_node_markdown_editor",attrs:{markdown:""}}),n("div",{staticClass:"float-right",attrs:{id:"panel"}},[n("b-btn",{on:{click:t.createRootNode}},[t._v("save")])],1)],1)],2)},I=[],N=n(67906),C=n(16198),S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"previewer"}},[n("b-form-textarea",{attrs:{debounce:"300"},model:{value:t.edit,callback:function(e){t.edit=e},expression:"edit"}}),n("MarkdownViewer",{attrs:{id:"preview",markdown:t.markdown}})],1)},D=[],E=n(97935),T=n(45952),R=n(85550),$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"view"},domProps:{innerHTML:t._s(t.compiledMarkdown)}})},L=[],O=n(43828),j=new E.M2((0,T.G)({langPrefix:"hljs language-",highlight:function(t,e){var n=R.Z.getLanguage(e)?e:"plaintext";return R.Z.highlight(t,{language:n}).value}}));j.use((0,O.u)());var B={name:"MarkdownViewer",props:{markdown:String},data:function(){return{edit:this.markdown}},computed:{compiledMarkdown:function(){return j.parse(this.edit)}}},V=B,P=(0,c.Z)(V,$,L,!1,null,"436dc3e2",null),A=P.exports,W=new E.M2((0,T.G)({langPrefix:"hljs language-",highlight:function(t,e){var n=R.Z.getLanguage(e)?e:"plaintext";return R.Z.highlight(t,{language:n}).value}})),z={name:"MarkdownEditor",components:{MarkdownViewer:A},props:{markdown:String},data:function(){return{edit:this.markdown}},mounted:function(){},computed:{compiledMarkdown:function(){var t=W.parse(this.edit);return console.log(t),t}}},U=z,G=(0,c.Z)(U,S,D,!1,null,"132d09b0",null),F=G.exports,H={name:"RootNodes",components:{MarkdownEditor:F},data:function(){return{nodes:[],title:""}},created:function(){this.listNodesByRoot()},methods:{listNodesByRoot:function(){var t=this;return(0,C.Z)((0,N.Z)().mark((function e(){return(0,N.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k().api.get(b.api.v1.node.list(0),null,{caller:t});case 2:t.nodes=e.sent;case 3:case"end":return e.stop()}}),e)})))()},createRootNode:function(){var t=this;return(0,C.Z)((0,N.Z)().mark((function e(){var n,r;return(0,N.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k().api.post(b.api.v1.node.node,null,{title:t.title,markdown:t.$refs.create_root_node_markdown_editor.edit},{caller:t});case 2:return n=e.sent,r=n.id,e.next=6,k().api.post(b.api.v1.node_relation.node_relation,null,{root:t.root,node:r},{caller:t});case 6:return e.next=8,k().api.post(b.api.v1.node_relation.node_relation,null,{root:t.root,node:r},{caller:t});case 8:t.$bvModal.hide("modal-create-root-node");case 9:case"end":return e.stop()}}),e)})))()}}},J=H,X=(0,c.Z)(J,M,I,!1,null,"002ed5f8",null),q=X.exports,K={name:"IndexView",components:{RootNodes:q}},Q=K,Y=(0,c.Z)(Q,y,Z,!1,null,"eae18310",null),tt=Y.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("NodeMatrix",{attrs:{"static-view":"","data-source":"/"+t.source+"/"+t.dataSource}})],1)},nt=[],rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.staticView?t._e():n("DownloadData",{attrs:{"node-matrix":t.nodeMatrix,toc:t.toc}}),n("TableOfContent",{attrs:{toc:t.toc}}),n("b-toast",{attrs:{id:"my-toast",variant:"warning",solid:"","no-auto-hide":"",visible:t.loading},scopedSlots:t._u([{key:"toast-title",fn:function(){return[n("div",{staticClass:"d-flex flex-grow-1 align-items-baseline"},[n("b-img",{staticClass:"mr-2",attrs:{blank:"","blank-color":"#ff5555",width:"12",height:"12"}}),n("strong",{staticClass:"mr-auto"},[t._v("Loading")]),n("small",{staticClass:"text-muted mr-2"},[t._v("42 seconds ago")])],1)]},proxy:!0}])},[n("b-spinner")],1),t._l(t.nodeMatrix,(function(e,r){return n("div",{key:"col-"+r,staticClass:"mt-5",staticStyle:{"white-space":"nowrap"}},t._l(e,(function(e,i){return n("div",{key:"col-"+r+"-row-"+i,ref:"node-"+e.ID,refInFor:!0,staticClass:"ml-5",class:{hidden:0===e.ID},staticStyle:{display:"inline-block",width:"500px","vertical-align":"middle"},attrs:{id:"node-"+e.ID},on:{mouseover:t.mouseover,click:function(n){return t.focusNode(e.ID)}}},[-1!==e.ID?n("div",{on:{dblclick:function(n){return t.edit(e)}}},[e.markdown.length>0?n("MarkdownCard",{staticStyle:{"white-space":"normal"},attrs:{id:"card-"+e.ID,markdown:e.markdown.toString(),nodeId:e.ID.toString(),"next-id":e.next,"child-id":e.child,"last-id":e.last,"parent-id":e.parent,"has-parent":void 0!==e.parent,"static-view":t.staticView,active:t.focus===e.ID},on:{navi:t.navi,add:t.add,remove:t.remove}}):n("AnalysisItem")],1):t._e()])})),0)})),t.staticView?t._e():n("b-modal",{attrs:{id:"node-common","hide-footer":"",size:"xl"}},[n("MarkdownEditor",{ref:"markdown_editor_common",attrs:{markdown:t.markdown}}),n("div",{staticClass:"float-right",attrs:{id:"panel"}},[n("b-btn",{on:{click:t.save}},[t._v("save")])],1)],1)],2)},it=[],ot=(n(9653),n(41539),n(54747),n(76133)),at=n(92751);n(43290),n(39714);function st(t){var e=[],n={h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},r=null;function i(t){if(1===t.nodeType&&"script"!==t.nodeName)if(Object.prototype.hasOwnProperty.call(n,t.nodeName.toLowerCase()))null===t.getAttribute("class")&&(null===r&&"h1"===t.nodeName.toLowerCase()?r=t:e.push(t));else for(var o=0;o<t.childNodes.length;o++)i(t.childNodes[o])}return i(t),{title:r,headings:e}}function ct(t){var e=j.parse(t),n=document.createElement("div");return n.innerHTML=e,st(n)}var lt=function(){function t(e,n,r){(0,ot.Z)(this,t),this.x=1,this.y=1,this.toc={headings:[],title:null},this.matrix=[[e]],this.nodes=n,this.nodeRelations=r,this.nextRecursive(e)}return(0,at.Z)(t,[{key:"nextRecursive",value:function(t){if(0!==t){var e=this.nodeRelations[t];if(0!==e.next){this.matrix[this.matrix.length-1].push(e.next);var n=this.matrix[this.matrix.length-1].length;if(n>this.y){for(var r=0;r<this.x-1;r++)this.matrix[r].push(0);this.y=n}this.nextRecursive(e.next)}else for(var i=this.matrix[this.x-1].length;i<this.y;i++)this.matrix[this.x-1].push(0)}}},{key:"childRecursive",value:function(t){for(var e=this.y-1;e>=0;e--){var n=this.matrix[t][e];if(0!==n){var r=this.nodeRelations[n];if(0!==r.child){var i=new Array(e).fill(0);i.push(r.child),this.matrix.push(i),this.x+=1,this.nextRecursive(r.child),this.childRecursive(this.x-1)}}}}},{key:"shift",value:function(){for(var t=2;t<=this.x-1;t++)for(var e=-1,n=-1,r=0;r<=this.y-1;r++)this.matrix[t][r]>0&&(-1!==e?n=r:(e=r,n=e)),0!==this.matrix[t][r]&&r!==this.y-1||(-1!==e&&this.shiftLine(t,e,n),e=-1,n=-1)}},{key:"shiftLine",value:function(t,e,n){for(var r=0,i=e;i<=n;i++){var o=t;while(o>0)if(o--,0!==this.matrix[o][i]){o+=1;break}if(o===t)return;(0===r||r>t-o)&&(r=t-o)}if(r>0)for(var a=e;a<=n;a++)this.matrix[t-r][a]=this.matrix[t][a],this.matrix[t][a]=0}},{key:"cleanSuffix",value:function(){for(var t=0;t<=this.y-1;t++)for(var e=this.x-1;e>=0;e--){if(this.matrix[e][t]>0)break;this.matrix[e][t]=-1}}},{key:"print",value:function(){for(var t=0;t<=this.y-1;t++){for(var e=0;e<=this.x-1;e++)process.stdout.write(this.matrix[e][t].toString());process.stdout.write("\n")}}},{key:"dumpNode",value:function(){for(var t=[[]],e=0;e<=this.y-1;e++){for(var n=[],r=0;r<=this.x-1;r++){var i=this.matrix[r][e],o=this.nodes[i];if(i>0){var a=this.nodeRelations[i];if(o.child=a.child,o.next=a.next,o.child>0){var s=this.nodes[o.child];s.parent=i}if(o.next>0){var c=this.nodes[o.next];c.last=i}}else o={ID:i,markdown:""};n.push(o)}t.push(n)}return t}},{key:"generateToc",value:function(t){var e=this;if(0!==t){var n=this.nodes[t],r=ct(n.markdown);null!==r.title&&(this.toc.title={nodeName:r.title.nodeName,innerText:r.title.innerText,id:r.title.id}),r.headings.forEach((function(t){var n={nodeName:t.nodeName,innerText:t.innerText,id:t.id};e.toc.headings.push(n)}));var i=this.nodeRelations[t];i.child>0&&this.generateToc(i.child),i.next>0&&this.generateToc(i.next)}}},{key:"caller",value:function(t){var e=this.nodes[t];if(t>0)return e.parent>0?e.parent:e.last>0?this.caller(e.last):void 0}}]),t}(),dt={Matrix:lt},ut=n(93191),ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card",{attrs:{"border-variant":t.active?"info":"","header-bg-variant":"light"},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{staticClass:"text-right"},[n("b-badge",{attrs:{comment:"just a place holder",pill:"",variant:"light"}},[n("b-link",{staticClass:"text-white"},[n("b-icon-arrow-up")],1)],1),t.active?n("span",[!t.staticView||t.hasNext?n("b-badge",{attrs:{pill:"",variant:t.hasNext?"secondary":"info"},on:{click:function(e){return e.stopPropagation(),t.navi(t.directions.down)}}},[n("b-link",{staticClass:"text-white"},[n("b-icon-arrow-down")],1)],1):t._e(),n("b-badge",{attrs:{pill:"",variant:t.hasChild?"secondary":"info"},on:{click:function(e){return e.stopPropagation(),t.navi(t.directions.right)}}},[n("b-link",{staticClass:"text-white"},[n("b-icon-arrow-right")],1)],1),t.hasLast?n("b-badge",{attrs:{pill:"",variant:"secondary"},on:{click:function(e){return e.stopPropagation(),t.navi(t.directions.up)}}},[n("b-link",{staticClass:"text-white"},[n("b-icon-arrow-up")],1)],1):t._e(),n("b-badge",{attrs:{pill:"",variant:"secondary"},on:{click:function(e){return e.stopPropagation(),t.navi(t.directions.left)}}},[n("b-link",{staticClass:"text-white"},[n("b-icon-arrow-left")],1)],1),n("b-badge",{staticClass:"ml-1",attrs:{pill:"",variant:t.active?"info":"light"},on:{click:function(e){return e.stopPropagation(),t.add(t.directions.up)}}},[n("b-link",{staticClass:"text-white"},[n("b-icon-arrow-bar-up")],1)],1),n("b-badge",{attrs:{pill:"",variant:t.active?"info":"light"},on:{click:function(e){return e.stopPropagation(),t.add(t.directions.left)}}},[n("b-link",{staticClass:"text-white"},[n("b-icon-arrow-bar-left")],1)],1),n("b-badge",{attrs:{pill:"",variant:t.active?"info":"light"},on:{click:function(e){return e.stopPropagation(),t.remove.apply(null,arguments)}}},[n("b-link",{staticClass:"text-white"},[n("b-icon-x")],1)],1)],1):t._e()],1)]},proxy:!0}])},[n("MarkdownViewer",{staticStyle:{width:"100%"},attrs:{markdown:t.markdown}})],1)],1)},ft=[],pt={name:"MarkdownCard",components:{MarkdownViewer:A},props:{nodeId:String,markdown:String,nextId:Number,childId:Number,lastId:Number,parentId:Number,hasParent:Boolean,staticView:Boolean,active:Boolean},data:function(){var t={};return t[b.directions.up]=this.lastId,t[b.directions.down]=this.nextId,t[b.directions.left]=this.parentId,t[b.directions.right]=this.childId,{hasNext:0!==this.nextId,hasChild:0!==this.childId,hasLast:void 0!==this.lastId,directions:b.directions,directions2Id:t}},methods:{exists:function(t){return void 0!==t&&0!==t},add:function(t){this.$emit("add",this.nodeId,t)},navi:function(t){var e=this.directions2Id[t];this.exists(e)||t===b.directions.left?this.$emit("navi",this.nodeId,e,t):this.add(t)},remove:function(){this.$emit("remove",this.nodeId)}}},mt=pt,vt=(0,c.Z)(mt,ht,ft,!1,null,"6444f0dc",null),xt=vt.exports,wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card",{staticClass:"mb-2",attrs:{tag:"article"}},[n("b-card-title",[t._v(" WithMounts() ")]),n("b-card-sub-title",[n("b-link",{staticClass:"card-link",attrs:{href:"#"}},[n("b-icon-github")],1)],1),n("b-card-body",[n("b-card-text",[t._v(" "+t._s(t.note)+" ")]),n("pre",[t._v(" "+t._s(t.code)+" ")])],1)],1)],1)},bt=[],gt={name:"AnalysisItem",props:{note:String,link:String,code:String},data:function(){return{}}},kt=gt,_t=(0,c.Z)(kt,wt,bt,!1,null,"6df6b935",null),yt=_t.exports,Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("SideBar",{attrs:{toc:t.toc}})],1)},Mt=[],It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-toc",modifiers:{"sidebar-toc":!0}}],staticClass:"toc-btn"},[n("b-icon",{attrs:{icon:"justify"}})],1),n("b-sidebar",{attrs:{id:"sidebar-toc",title:"Toc",right:"",visible:"",shadow:""}},[n("div",{staticClass:"px-3 py-2"},[null!==t.toc.title?n("a",{attrs:{href:"#"+t.toc.title.id},on:{click:function(e){return e.preventDefault(),t.anchor(t.toc.title.id)}}},[n("strong",[t._v(t._s(t.toc.title.innerText))])]):t._e(),n("hr"),n("ul",t._l(t.toc.headings,(function(e,r){return n("li",{key:"header-"+r,class:"toc-"+e.nodeName.toLowerCase()},[n("a",{attrs:{href:"#"+e.id},on:{click:function(n){return n.preventDefault(),t.anchor(e.id)}}},[t._v(t._s(e.innerText))])])})),0)])])],1)},Nt=[];function Ct(t){var e=document.getElementById(t);e&&e.scrollIntoView()}var St={name:"SideBar",props:{toc:Object},methods:{anchor:Ct}},Dt=St,Et=(0,c.Z)(Dt,It,Nt,!1,null,"de7e909e",null),Tt=Et.exports,Rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("label",{staticClass:"collapse btn btn-secondary toc-btn",attrs:{for:"_1"}},[n("b-icon",{attrs:{icon:"justify"}})],1),n("input",{attrs:{id:"_1",type:"radio",name:"c1"}}),n("b-sidebar",{attrs:{id:"sidebar-toc",title:"Toc",right:"",shadow:"",visible:""},scopedSlots:t._u([{key:"header",fn:function(){return[n("label",{staticClass:"collapse",attrs:{for:"_2"}},[n("b-icon",{attrs:{icon:"x",variant:"secondary"}})],1),n("input",{attrs:{id:"_2",type:"radio",name:"c1"}})]},proxy:!0}])},[n("div",{staticClass:"px-3 py-2"},[n("ul",t._l(t.toc,(function(e,r){return n("li",{key:"header-"+r,class:"toc-"+e.nodeName.toLowerCase()},[n("a",{attrs:{href:"#"+e.id}},[t._v(t._s(e.innerText))])])})),0)])])],1)},$t=[],Lt={name:"SideBarStatic",props:{toc:Array}},Ot=Lt,jt=(0,c.Z)(Ot,Rt,$t,!1,null,"07a09ed6",null),Bt=jt.exports,Vt={name:"TableOfContent",components:{SideBarStatic:Bt,SideBar:Tt},props:{toc:Object},data:function(){return{headings:[{nodeName:"h1",innerText:"heading"}]}},mounted:function(){},methods:{}},Pt=Vt,At=(0,c.Z)(Pt,Zt,Mt,!1,null,"404cb7d5",null),Wt=At.exports,zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-button",{staticClass:"download-btn",on:{click:t.downloadDataSource}},[n("b-icon",{attrs:{icon:"download"}})],1)},Ut=[],Gt=(n(38862),n(78783),n(33948),n(60285),n(41637),{name:"DownloadData",props:{nodeMatrix:Array,toc:Object},data:function(){return{}},methods:{downloadDataSource:function(){var t={matrix:this.nodeMatrix,toc:this.toc},e=JSON.stringify(t),n=window.URL.createObjectURL(new Blob([e])),r=document.createElement("a");r.href=n,r.setAttribute("download","data-source.json"),document.body.appendChild(r),r.click()}}}),Ft=Gt,Ht=(0,c.Z)(Ft,zt,Ut,!1,null,"5d3b61f4",null),Jt=Ht.exports;function Xt(t,e,n,r,i){return qt.apply(this,arguments)}function qt(){return qt=(0,C.Z)((0,N.Z)().mark((function t(e,n,r,i,o){return(0,N.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=void 0===i?0:i,o=void 0===o?0:o,t.next=4,k().api.post(b.api.v1.node_relation.node_relation,null,{root:n,node:r,next:i,child:o},{caller:e});case 4:case"end":return t.stop()}}),t)}))),qt.apply(this,arguments)}function Kt(t,e,n){return Qt.apply(this,arguments)}function Qt(){return Qt=(0,C.Z)((0,N.Z)().mark((function t(e,n,r){return(0,N.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k().api.put(b.api.v1.node_relation.update_node_relation_by_node(n),null,r,{caller:e});case 2:case"end":return t.stop()}}),t)}))),Qt.apply(this,arguments)}function Yt(t,e,n,r,i){return te.apply(this,arguments)}function te(){return te=(0,C.Z)((0,N.Z)().mark((function t(e,n,r,i,o){var a,s,c;return(0,N.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=o[r],s=a.parent,c=a.last,void 0===s){t.next=6;break}return t.next=6,Kt(e,s,{child:i});case 6:if(void 0===c){t.next=9;break}return t.next=9,Kt(e,c,{next:i});case 9:case"end":return t.stop()}}),t)}))),te.apply(this,arguments)}function ee(t,e,n,r,i,o){return ne.apply(this,arguments)}function ne(){return ne=(0,C.Z)((0,N.Z)().mark((function t(e,n,r,i,o,a){return(0,N.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.t0=n,t.next=t.t0===b.directions.right?3:t.t0===b.directions.down?8:t.t0===b.directions.up?13:t.t0===b.directions.left?18:23;break;case 3:return t.next=5,Xt(e,r,o);case 5:return t.next=7,Kt(e,i,{child:o});case 7:return t.abrupt("break",23);case 8:return t.next=10,Xt(e,r,o);case 10:return t.next=12,Kt(e,i,{next:o});case 12:return t.abrupt("break",23);case 13:return t.next=15,Xt(e,r,o,i);case 15:return t.next=17,Yt(e,r,i,o,a);case 17:return t.abrupt("break",23);case 18:return t.next=20,Xt(e,r,o,0,i);case 20:return t.next=22,Yt(e,r,i,o,a);case 22:return t.abrupt("break",23);case 23:case"end":return t.stop()}}),t)}))),ne.apply(this,arguments)}function re(t,e,n){return ie.apply(this,arguments)}function ie(){return ie=(0,C.Z)((0,N.Z)().mark((function t(e,n,r){return(0,N.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k().api.put(b.api.v1.node.item(n),null,{markdown:r},{caller:e,success_msg:"update successfully"});case 2:case"end":return t.stop()}}),t)}))),ie.apply(this,arguments)}function oe(t,e){return ae.apply(this,arguments)}function ae(){return ae=(0,C.Z)((0,N.Z)().mark((function t(e,n){var r;return(0,N.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k().api.post(b.api.v1.node.node,null,{markdown:n},{caller:e});case 2:return r=t.sent,t.abrupt("return",r.id);case 4:case"end":return t.stop()}}),t)}))),ae.apply(this,arguments)}var se={name:"NodeMatrix",components:{DownloadData:Jt,TableOfContent:Wt,AnalysisItem:yt,MarkdownCard:xt,MarkdownEditor:F},props:{root:Number,staticView:Boolean,dataSource:String},data:function(){return{nodesMap:{},nodeRelationsMap:{},matrix:{},nodeMatrix:[],mode:0,mode_edit:!1,baseNode:0,markdown:"",plumbInstance:null,nodeLoading:!1,nodeRelationsLoading:!1,toc:{headings:[],title:null},time_start:0,focus:0}},computed:{loading:function(){return this.nodeLoading||this.nodeRelationsLoading}},created:function(){var t=this;return(0,C.Z)((0,N.Z)().mark((function e(){return(0,N.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.time_start=(new Date).getTime(),e.next=3,t.refreshData();case 3:case"end":return e.stop()}}),e)})))()},mounted:function(){this.plumbInstance=ut.jsPlumb.getInstance(),this.plumbInstance.bind("click",(function(t){window.scrollTo(t.target.offsetLeft-100,t.target.offsetTop-100)}))},destroyed:function(){this.plumbInstance.deleteEveryConnection(),this.plumbInstance.deleteEveryEndpoint()},watch:{nodeMatrix:function(){var t=(0,C.Z)((0,N.Z)().mark((function t(){var e=this;return(0,N.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$nextTick((function(){e.drawLine()}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},methods:{focusNode:function(t){this.focus=t},hideNode:function(t){var e=this;return(0,C.Z)((0,N.Z)().mark((function n(){return(0,N.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,k().api["delete"](b.api.v1.node_relation.hide_node(t),null,{caller:e,success_msg:"delete node successfully"});case 2:return n.next=4,e.refreshData();case 4:case"end":return n.stop()}}),n)})))()},anchor:Ct,refreshData:function(){var t=this;return(0,C.Z)((0,N.Z)().mark((function e(){var n;return(0,N.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.staticView){e.next=7;break}return e.next=3,k().api.get(t.dataSource,null,{caller:t,success_msg:"list node matrix successfully"});case 3:return n=e.sent,t.nodeMatrix=n["matrix"],t.toc=n["toc"],e.abrupt("return");case 7:return console.log("time before data pulled is","".concat((new Date).getTime()-t.time_start,"ms")),e.next=10,t.listNodes(t.root);case 10:return e.next=12,t.listNodeRelationsByRoot(t.root);case 12:console.log("time after data pulled is","".concat((new Date).getTime()-t.time_start,"ms")),t.matrix=new dt.Matrix(t.root,t.nodesMap,t.nodeRelationsMap),t.matrix.childRecursive(0),t.matrix.shift(),t.matrix.cleanSuffix(),t.nodeMatrix=t.matrix.dumpNode(),t.matrix.generateToc(t.root),t.toc=t.matrix.toc;case 20:case"end":return e.stop()}}),e)})))()},refreshWorld:function(){var t=this;return(0,C.Z)((0,N.Z)().mark((function e(){return(0,N.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.plumbInstance.deleteEveryConnection(),t.plumbInstance.deleteEveryEndpoint(),e.next=4,t.refreshData();case 4:case"end":return e.stop()}}),e)})))()},edit:function(t){this.markdown=t.markdown,this.$bvModal.show("node-common"),this.baseNode=t.ID,this.mode_edit=!0},resetMarkdownEditor:function(){this.mode=0,this.markdown="",this.mode_edit=!1,this.$bvModal.hide("node-common")},save:function(){var t=this;return(0,C.Z)((0,N.Z)().mark((function e(){var n,r;return(0,N.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.$refs.markdown_editor_common.edit,!t.mode_edit){e.next=6;break}return e.next=4,re(t,t.baseNode,n);case 4:e.next=11;break;case 6:return e.next=8,oe(t,n);case 8:return r=e.sent,e.next=11,ee(t,t.mode,t.root,t.baseNode,r,t.nodesMap);case 11:return t.resetMarkdownEditor(),e.next=14,t.refreshWorld();case 14:case"end":return e.stop()}}),e)})))()},navi:function(t,e,n){n===b.directions.left&&(e=this.matrix.caller(t)),Ct("card-"+e),this.focus=e},add:function(t,e){this.baseNode=parseInt(t),this.mode=e,this.$bvModal.show("node-common")},remove:function(t){confirm("are you sure to delete #".concat(t,"? all of it's children will be deleted"))&&this.hideNode(t)},mouseover:function(){},drawLine:function(){var t=this;t.plumbInstance.ready((function(){for(var e=0;e<t.nodeMatrix.length;e++)for(var n=0;n<t.nodeMatrix[e].length;n++){var r=t.nodeMatrix[e][n];r.ID<=0||(0!==r.child&&t.plumbInstance.connect({source:"node-"+r.ID,target:"node-"+r.child,anchor:["Right","Left"],endpoint:"Blank",connector:["Straight"],overlays:[["Arrow",{width:16,length:16,location:1}]],paintStyle:{stroke:"#909393",strokeWidth:2}}),0!==r.next&&t.plumbInstance.connect({source:"node-"+r.ID,target:"node-"+r.next,anchor:["Bottom","Top"],endpoint:"Blank",connector:["Straight"],overlays:[["Arrow",{width:16,length:16,location:1}]],paintStyle:{stroke:"#909393",strokeWidth:2}}))}})),console.log("time after line drawn cost is","".concat((new Date).getTime()-this.time_start,"ms"))},listNodes:function(t){var e=this;return(0,C.Z)((0,N.Z)().mark((function n(){var r;return(0,N.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.nodeLoading=!0,n.next=3,k().api.get(b.api.v1.node.list(t),null,{caller:e,success_msg:"list node successfully"});case 3:r=n.sent,r.forEach((function(t){e.nodesMap[t.ID]=t})),e.nodeLoading=!1;case 6:case"end":return n.stop()}}),n)})))()},listNodeRelationsByRoot:function(t){var e=this;return(0,C.Z)((0,N.Z)().mark((function n(){var r;return(0,N.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.nodeRelationsLoading=!0,n.next=3,k().api.get(b.api.v1.node_relation.item(t),null,{caller:e,success_msg:"list node_relation successfully"});case 3:r=n.sent,r.forEach((function(t){e.nodeRelationsMap[t.node]=t})),e.nodeRelationsLoading=!1;case 6:case"end":return n.stop()}}),n)})))()}}},ce=se,le=(0,c.Z)(ce,rt,it,!1,null,"15464014",null),de=le.exports,ue={name:"StaticView",components:{NodeMatrix:de},data:function(){return{dataSource:this.$route.params.data_source,source:this.$route.params.source}},created:function(){k().api.initClient("/")}},he=ue,fe=(0,c.Z)(he,et,nt,!1,null,"912daf0c",null),pe=fe.exports,me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("NodeMatrix",{attrs:{root:t.root}})],1)},ve=[],xe={name:"DynamicView",components:{NodeMatrix:de},data:function(){return{root:parseInt(this.$route.params.id)}}},we=xe,be=(0,c.Z)(we,me,ve,!1,null,"54656367",null),ge=be.exports;r["default"].use(_.Z);var ke=new _.Z({routes:[{path:"/",name:"IndexView",component:tt},{path:"/node/:id",name:"NodeMatrix",component:ge},{path:"/static/:source/:data_source",name:"StaticView",component:pe}]});r["default"].use(u.XG7),r["default"].use(h.A7),r["default"].use(f.Z),k().api.initClient(b.BaseUrl),r["default"].config.productionTip=!1,new r["default"]({router:ke,render:function(t){return t(d)}}).$mount("#app")}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=t,function(){var t=[];n.O=function(e,r,i,o){if(!r){var a=1/0;for(d=0;d<t.length;d++){r=t[d][0],i=t[d][1],o=t[d][2];for(var s=!0,c=0;c<r.length;c++)(!1&o||a>=o)&&Object.keys(n.O).every((function(t){return n.O[t](r[c])}))?r.splice(c--,1):(s=!1,o<a&&(a=o));if(s){t.splice(d--,1);var l=i();void 0!==l&&(e=l)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[r,i,o]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var i,o,a=r[0],s=r[1],c=r[2],l=0;if(a.some((function(e){return 0!==t[e]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(c)var d=c(n)}for(e&&e(r);l<a.length;l++)o=a[l],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(d)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(41859)}));r=n.O(r)})();
//# sourceMappingURL=app-legacy.ddbd0d91.js.map