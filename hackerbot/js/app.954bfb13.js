(function(e){function t(t){for(var a,s,o=t[0],c=t[1],l=t[2],d=0,h=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&h.push(n[s][0]),n[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(h.length)h.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],a=!0,o=1;o<r.length;o++){var c=r[o];0!==n[c]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},n={app:0},i=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/hackerbot/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"00fb":function(e,t,r){},"024c":function(e,t,r){"use strict";var a=r("7f5c"),n=r.n(a);n.a},"034f":function(e,t,r){"use strict";var a=r("85ec"),n=r.n(a);n.a},1087:function(e,t,r){"use strict";var a=r("b96d"),n=r.n(a);n.a},3970:function(e,t,r){},"47b3":function(e,t,r){"use strict";var a=r("9ff6"),n=r.n(a);n.a},"49a4":function(e,t,r){"use strict";var a=r("9e81"),n=r.n(a);n.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:[{collapsed:e.collapsed}],attrs:{id:"app"}},[r("div",{staticClass:"content"},[r("router-view")],1),r("sidebar-menu",{attrs:{menu:e.menu,width:"200px",collapsed:e.collapsed,"show-one-child":!0},on:{"toggle-collapse":e.onCollapse,"item-click":e.onItemClick}})],1)},i=[],s={name:"app",data:function(){return{menuCommon:{brand:{href:"/",title:"捕风",icon:"fas fa-robot"},usage_header:{header:!0,title:"Usage"},intelligence:{href:"/intelligence",title:"intelligences",icon:"fas fa-info"},todo:{href:"/todo",title:"todo",icon:"fas fa-clipboard-list"},source:{href:"/source",title:"sources",icon:"fab fa-pagelines"},category:{href:"/category",title:"category",icon:"fas fa-coins"},tag:{href:"/tag",title:"tag",icon:"fas fa-tags"},about:{href:"/about",title:"About",icon:"fas fa-info-circle"}},loading:!1,collapsed:!0}},computed:{menu:function(){var e=[this.menuCommon["brand"],this.menuCommon["usage_header"],this.menuCommon["intelligence"],this.menuCommon["todo"],this.menuCommon["source"],this.menuCommon["category"],this.menuCommon["tag"]];return e.push(this.menuCommon["about"]),e}},methods:{onCollapse:function(e){this.collapsed=e},onItemClick:function(e,t){switch(t.title){case"click to login":break;case"click to logout":break}}}},o=s,c=(r("034f"),r("2877")),l=Object(c["a"])(o,n,i,!1,null,null,null),u=l.exports,d=r("8c4f"),h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"control-section"},[e._m(0),r("div",{staticStyle:{width:"50%",margin:"auto"}},[r("b-form-input",{staticStyle:{background:"none",color:"white",border:"#007bff 1px solid"},attrs:{placeholder:"search...",type:"search"}})],1),r("div",{staticClass:"content-wrapper",staticStyle:{"padding-top":"30px"}},[r("ejs-treemap",{key:e.show,ref:"treemap",staticStyle:{"min-height":"700px"},attrs:{id:"container",align:"center",if:e.show,drillStart:e.drillStart,tooltipRendering:e.tooltipRendering,palette:e.palette,titleSettings:e.titleSettings,format:"n",useGroupingSeparator:e.useGroupingSeparator,dataSource:e.dataSourceTest,weightValuePath:e.weightValuePath,tooltipSettings:e.tooltipSettings,leafItemSettings:e.leafItemSettings,levels:e.levels,selectionSettings:e.selectionSettings,highlightSettings:e.highlightSettings},on:{itemClick:e.greet}})],1)])])},m=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h1",{staticClass:"text-center",staticStyle:{color:"dodgerblue"}},[r("i",{staticClass:"fas fa-robot",staticStyle:{"padding-top":"50px","padding-bottom":"50px"}}),e._v(" 捕 风 ")])}],p=(r("b0c0"),r("b64b"),r("e25e"),r("96cf"),r("89ba")),f=r("bc3a"),g=r.n(f),v={apiV1:"/api/v1",apiV2:"/api/v2",baseUrl:"https://hackerbot.st0n3.xyz:9001",baseUrlDev:"https://127.0.0.1:9101"},b=g.a.create({baseURL:v.baseUrl+v.apiV1,json:!0,withCredentials:!0}),_={clientV2:g.a.create({baseURL:v.baseUrl+v.apiV2,json:!0,withCredentials:!0}),execute:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r,a,n,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t({method:r,url:a,params:i,data:n}).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));function t(t,r,a,n,i){return e.apply(this,arguments)}return t}(),listResources:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b;return this.execute(a,"get",e,t,r)},createResource:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b;return this.execute(r,"post",e,t)},deleteResource:function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b;return this.execute(a,"delete",e+"/"+t,r)},updateResource:function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b;return this.execute(a,"put",e+"/"+t,r)},parse_source:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;return this.execute(t,"post","sources/parse","",{feed_url:e})},add_source:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b;return this.execute(r,"post","sources",{feed_url:e,category_id:t})},generateCategoriesCursive:function(e,t){e.children=[];for(var r=0;r<t.length;r++){var a=t[r];a.parent=parseInt(a.parent),e.id=parseInt(e.id),a.parent===e.id&&(a.label=a.name,e.children.push(a))}for(var n=0;n<e.children.length;n++){var i=e.children[n];i=this.generateCategoriesCursive(i,t),e.children[n]=i}return e},generateDataSource:function(e,t,r){var a="level"+r;e[a]=[];for(var n=0;n<t.length;n++){var i=t[n];i.parent=parseInt(i.parent),e.id=parseInt(e.id),i.parent===e.id&&(i.Name=i.name,i.Population=1,e[a].push(i))}for(var s=0;s<e[a].length;s++){var o=e[a][s];o=this.generateDataSource(o,t,r+1),e[a][s]=o}return e},refreshLastUpdate:function(){return this.execute(b,"get","resources/last_update")},refresh:function(){return this.execute(b,"post","resources/refresh")},submit_comment:function(e,t){var r={comment:t};return this.execute(b,"post","resources/comment/"+e,r)},submit_todo:function(e,t,r){var a={todo:t};console.log("todo_type",r);var n=0===r?"resources":"todo";return n+="/todo/"+e,this.execute(b,"post",n,a)}},y=r("ce94"),x=r("b793");a["default"].use(y["a"]);var w=a["default"].extend({data:function(){return{palette:["#C33764","#AB3566","#993367","#853169","#742F6A","#632D6C","#532C6D","#412A6F","#312870","#1D2671"],titleSettings:{},enableDrillDown:!0,useGroupingSeparator:!0,dataSource:[],weightValuePath:"Population",tooltipSettings:{visible:!0,format:"${Name} : ${Population}"},show:!1,leafItemSettings:{labelPath:"Name",labelPosition:"Center",showLabels:!0,labelStyle:{size:"13px"},border:{color:"black",width:.5}},levels:[{groupPath:"level0",showHeader:!0,border:{color:"white",width:.5},headerAlignment:"Center",headerStyle:{size:"16px"}},{groupPath:"level1",showHeader:!0,border:{color:"white",width:.5},headerAlignment:"Center",headerStyle:{size:"16px"}},{groupPath:"level2",showHeader:!0,border:{color:"white",width:.5},headerAlignment:"Center",headerStyle:{size:"16px"}}],headerdata:[{value:"Near",text:"Near"},{value:"Far",text:"Far"},{value:"Center",text:"Center"}],localFields:{text:"value",value:"text"},labelswidth:120,dataSourceTest:[],selectionSettings:{enable:!0,fill:"#58a0d3",border:{width:.3,color:"black"},opacity:"1"},highlightSettings:{enable:!0,fill:"#71b0dd",border:{width:.3,color:"black"},opacity:"1"}}},provide:{treemap:[x["a"]]},created:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.refreshCategories();case 3:this.loading=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{refreshCategories:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,this.show=!1,t={id:0},e.next=5,_.listResources("category");case 5:r=e.sent,this.dataSourceTest=[this.generateDataSource(t,r,0)],this.show=!0,this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),generateDataSource:function(e,t,r){var a="level"+r;e[a]=[];for(var n=0;n<t.length;n++){var i=t[n];i.parent=parseInt(i.parent),e.id=parseInt(e.id),i.parent===e.id&&(i.Name=i.name,i.Population=1,e[a].push(i))}for(var s=0;s<e[a].length;s++){var o=e[a][s];o=this.generateDataSource(o,t,r+1),e[a][s]=o}return e.Population=e[a].length+1,e},drillStart:function(e){1===e.item[Object.keys(e.item)[0]].length?e.treemap.levels[2].showHeader=!0:e.treemap.levels[2].showHeader=!1},tooltipRendering:function(e){2!==e.item["groupIndex"]&&(e.cancel=!0)},changeHeader:function(e){for(var t=this.$refs.treemap.ej2Instances,r=0;r<t.levels.length-1;r++)t.levels[r].headerAlignment=e.value;t.refresh()},changeLabels:function(e){var t=this.$refs.treemap.ej2Instances;t.levels[2].headerAlignment=e.value,t.refresh()},changeDrillView:function(e){var t=this.$refs.treemap.ej2Instances;!0===e.checked?t.drillDownView=!0:t.drillDownView=!1,t.refresh()},changebreadCrumb:function(){var e=this.$refs.treemap.ej2Instances;this.$refs.treemap.ej2Instances.enableBreadcrumb=this.$refs.breadCrumb.ej2Instances.checked;var t=document.getElementById("breadCrumbText").value;e.breadCrumb=t,e.refresh()},changebreadCrumbText:function(){},greet:function(e){console.log(e.item.id),this.$router.push({name:"Intelligence",query:{category_id:JSON.stringify([e.item.id])}})}}}),k=w,R=(r("024c"),Object(c["a"])(k,h,m,!1,null,null,null)),C=R.exports,S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"intelligence"}},[r("b-alert",{attrs:{show:e.error.length>0,variant:"warning"}},[e._v(e._s(e.error))]),r("div",{staticClass:"date_select row"},[r("div",{staticClass:"col"},[r("div",{staticClass:"add_resource"},[r("treeselect",{attrs:{placeholder:"select category",multiple:!0,options:e.categoriesOptions.children},model:{value:e.category_id,callback:function(t){e.category_id=t},expression:"category_id"}})],1)]),r("div",{staticClass:"col"},[r("div",{staticClass:"add_resource"},[r("treeselect",{attrs:{placeholder:"select tag",multiple:!0,options:e.tags},model:{value:e.model.tag,callback:function(t){e.$set(e.model,"tag",t)},expression:"model.tag"}})],1)]),r("datepicker",{attrs:{format:"yyyy-MM-dd"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),r("div",{staticStyle:{"margin-left":"10px"}},[r("b-btn",{on:{click:e.refreshResources}},[e._v("show")])],1),r("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-1",modifiers:{"modal-1":!0}}],staticStyle:{"margin-right":"20px","margin-left":"20px"},on:{click:function(t){delete e.intelligence_model["id"]}}},[r("i",{staticClass:"fa fa-plus"})]),r("b-modal",{attrs:{id:"modal-1","header-bg-variant":e.headerBgVariant,"header-text-variant":e.headerTextVariant,"body-bg-variant":e.bodyBgVariant,"body-text-variant":e.bodyTextVariant,"footer-bg-variant":e.footerBgVariant,"footer-text-variant":e.footerTextVariant},on:{ok:e.handleOk},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v(" "+e._s(e.intelligence_model.id?"Edit Intelligence ID#"+e.intelligence_model.id:"New Intelligence")+" ")]},proxy:!0}])},[r("b-form-group",{staticClass:"add_intelligence"},[r("b-input-group",{staticClass:"mt-3",attrs:{prepend:"url/guid"}},[r("b-form-input",{model:{value:e.intelligence_model.guid,callback:function(t){e.$set(e.intelligence_model,"guid",t)},expression:"intelligence_model.guid"}})],1),r("b-input-group",{staticClass:"mt-3",attrs:{prepend:"title"}},[r("b-input",{model:{value:e.intelligence_model.item.title,callback:function(t){e.$set(e.intelligence_model.item,"title",t)},expression:"intelligence_model.item.title"}})],1),r("b-input-group",{staticClass:"mt-3",attrs:{prepend:"author"}},[r("b-input",{model:{value:e.intelligence_model.item.author.name,callback:function(t){e.$set(e.intelligence_model.item.author,"name",t)},expression:"intelligence_model.item.author.name"}})],1),r("b-input-group",{staticClass:"mt-3",attrs:{prepend:"description"}},[r("b-input",{model:{value:e.intelligence_model.item.description,callback:function(t){e.$set(e.intelligence_model.item,"description",t)},expression:"intelligence_model.item.description"}})],1),!1===e.intelligence_model.hasOwnProperty("id")||0===e.intelligence_model.source_id?r("treeselect",{staticStyle:{"margin-top":"15px"},attrs:{placeholder:"select category",options:e.categoriesOptions.children},model:{value:e.intelligence_model.category_id,callback:function(t){e.$set(e.intelligence_model,"category_id",t)},expression:"intelligence_model.category_id"}}):e._e(),r("b-form-tags",{staticClass:"mb-2",staticStyle:{"margin-top":"15px"},model:{value:e.intelligence_model.tags,callback:function(t){e.$set(e.intelligence_model,"tags",t)},expression:"intelligence_model.tags"}})],1)],1)],1),r("div",{ref:"waterfall_parent",staticStyle:{"padding-bottom":"20px"}},[r("Waterfall",{ref:"waterfall",attrs:{list:e.resources,gutter:10,width:540,phoneCol:1,backgroundColor:"rgb(73, 74, 95, 0.3)"},scopedSlots:e._u([{key:"item",fn:function(t){return[r("b-card",{staticClass:"intelligence_card"},[r("b-card-header",[r("p",[t.data.item.hasOwnProperty("author")?r("span",{staticClass:"fas fa-feather-alt",staticStyle:{"padding-right":"10px"}},[e._v(" "+e._s(t.data.item.author.name)+" ")]):e._e(),r("a",{staticClass:"fas fa-external-link-alt",attrs:{target:"_blank",href:t.data.item.link}},[e._v(" "+e._s(t.data.item.title)+" ")])])]),r("b-card-body",[r("i",{staticClass:"fas fa-align-left",staticStyle:{"padding-right":"10px"}}),r("span",{staticClass:"description-span",domProps:{innerHTML:e._s(t.data.item.description)}})]),r("b-card-footer",[r("span",{staticClass:"far fa-clock",staticStyle:{"padding-right":"10px"}},[e._v(" "+e._s(new Date(t.data.published_parsed.replace(" ","T")+"Z").toLocaleString())+" ")]),r("b-btn",{on:{click:function(r){return e.refreshResourcesByCategory(t.data.category_id)}}},[r("i",{staticClass:"fas fa-coins"},[e._v(" "+e._s(t.data.category_name)+" ")])]),r("i",{staticClass:"fab fa-chrome",staticStyle:{"padding-left":"10px","padding-right":"5px"}}),r("span",[e._v(e._s(e.come_from(t.data.guid)))]),r("br"),r("i",{staticClass:"fas fa-hashtag"}),r("span",[e._v(e._s(t.data.item.tags))]),r("a",{staticStyle:{"margin-left":"3px"},attrs:{href:"#"}},[e._v(" #tag1 ")]),r("a",{staticStyle:{"margin-left":"3px"},attrs:{href:"#"}},[e._v(" #tag2 ")]),r("br"),r("div",[r("hr",{directives:[{name:"show",rawName:"v-show",value:t.data.comment.length>0,expression:"props.data.comment.length>0"}],staticStyle:{"border-top":"1px solid rgba(255, 255, 255, 0.4)"}}),r("span",{directives:[{name:"show",rawName:"v-show",value:t.data.comment.length>0,expression:"props.data.comment.length > 0"}],staticStyle:{"font-size":"30px"}},[e._v("“")]),r("span",{ref:"comment-span-"+t.data.id},[e._v(" "+e._s(t.data.comment)+" ")]),r("b-textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"comment-textarea-"+t.data.id,model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}}),r("span",{directives:[{name:"show",rawName:"v-show",value:t.data.comment.length>0,expression:"props.data.comment.length>0"}],staticStyle:{"font-size":"30px"}},[e._v("”")])],1),r("span",{staticStyle:{float:"right"}},[r("b-btn",{on:{click:function(r){return e.click_todo(t)}}},[r("i",{staticClass:"fas fa-clipboard-list",style:1===t.data.todo?"color: #82c91e;":""},[e._v(" todo ")])]),r("b-btn",{ref:"comment-button-"+t.data.id,staticStyle:{"margin-left":"10px"},on:{click:function(r){return e.click_comment(t.data.id,t)}}},[r("i",{staticClass:"fas fa-comment"},[e._v(" comment ")])]),r("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-1",modifiers:{"modal-1":!0}}],staticStyle:{"margin-left":"10px"},on:{click:function(r){return e.populateResourceToEdit(t.data)}}},[r("i",{staticClass:"fas fa-pen"},[e._v(" edit ")])]),r("b-btn",{staticStyle:{"margin-left":"10px"}},[r("i",{staticClass:"fas fa-times"},[e._v(" delete ")])])],1)],1)],1)]}}])})],1)],1)},O=[],$=(r("a4d3"),r("e01a"),r("4160"),r("accc"),r("0d03"),r("d3b7"),r("ac1f"),r("3ca3"),r("5319"),r("2ca0"),r("9911"),r("159b"),r("ddb0"),r("2b3d"),r("823d")),j=r.n($),T=r("fa33"),I=r("ca17"),D=r.n(I);r("542c");j.a.computed.itemWidth=function(){var e=this.screenWidth,t=this.gutter,r=this.width,a=this.phoneCol;return e>=1200?r:(e-(a+1)*t)/a-90};var P={name:"Intelligence",components:{Waterfall:j.a,Datepicker:T["a"],Treeselect:D.a},data:function(){return{items:[],resources:[],error:"",date:null,category_id:[],limit:100,model:[],categories:[{value:1,text:"ca"}],categoriesOptions:[],key:0,value:["apple","orange"],intelligence_model:{item:{author:{name:""}}},variants:["primary","secondary","success","warning","danger","info","light","dark"],headerBgVariant:"dark",headerTextVariant:"light",bodyBgVariant:"dark",bodyTextVariant:"dark",footerBgVariant:"dark",footerTextVariant:"dark",tags:[{id:1,name:"linux",label:"linux"},{id:2,name:"windows",label:"windows"}],comment:""}},props:{msg:String},created:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,console.log(this.$route.query.date),void 0!==this.$route.query.date&&(this.date=new Date(this.$route.query.date).toISOString()),void 0!==this.$route.query.category_id&&(this.category_id=JSON.parse(this.$route.query.category_id)),void 0!==this.$route.query.limit&&(this.limit=this.$route.query.limit),e.next=7,this.refreshCategories();case 7:return e.next=9,this.refreshResources();case 9:this.loading=!1;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{loadOptions:function(){return this.categoriesOptions.children},come_from:function(e){return new URL(e).hostname},refreshResources:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,i,s,o,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,this.resources=[],t={},r={},a=[],this.category_id.length>0&&(a=this.category_id),0===this.category_id.length&&null===this.date&&(this.date=new Date(Date.now())),null===this.date?r=t={category_id:JSON.stringify(a),limit:this.limit}:(t={date:this.date,category_id:JSON.stringify(a)},r={date:new Date(this.date).toISOString(),category_id:JSON.stringify(a)}),e.next=10,_.listResources("resources",{},t);case 10:for(n=e.sent,i=new DOMParser,s=function(e){var t=n[e],r=JSON.parse(n[e].item),a=i.parseFromString(r.description,"text/html");a.getElementsByTagName("img").forEach((function(e){var r=e.getAttribute("src");if(r.startsWith("/")){var a=new URL(t.guid);e.src=a.protocol+"//"+a.hostname+r}e.referrerPolicy="no-referrer"})),r.description=a.body.innerHTML.substr(0,500),t["item"]=r,c.resources.push(t)},o=0;o<n.length;o++)s(o);this.$router.replace({query:r}).catch((function(e){if("NavigationDuplicated"!==e.name)throw e})),this.loading=!1;case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),refreshCategories:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,_.listResources("category");case 3:this.categories=e.sent,t={id:0},this.categoriesOptions=_.generateCategoriesCursive(t,this.categories),this.loading=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),populateResourceToEdit:function(e){this.intelligence_model={item:{author:{name:""}}},this.intelligence_model.id=e.id,this.intelligence_model.guid=e.guid,this.intelligence_model.source_id=e.source_id,this.intelligence_model.category_id=e.category_id,this.intelligence_model.published_parsed=e.published_parsed,this.intelligence_model.item.title=e.item.title,this.intelligence_model.item.author.name=e.item.author.name,this.intelligence_model.item.description=e.item.description},deleteResource:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Are you sure you want to delete this intelligence?")){e.next=6;break}return this.intelligence_model.id===t&&(this.intelligence_model={}),e.next=4,_.deleteResource("resources",t);case 4:return e.next=6,this.refreshResources();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleOk:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,!0!==this.intelligence_model.hasOwnProperty("id")){e.next=12;break}return console.log(this.intelligence_model),this.intelligence_model.item.link=this.intelligence_model.guid,t={guid:this.intelligence_model.guid,category_id:this.intelligence_model.category_id,published_parsed:(new Date).toISOString(),item:JSON.stringify(this.intelligence_model.item)},e.next=7,_.updateResource("resources",this.intelligence_model.id,t);case 7:return e.next=9,this.refreshResources();case 9:console.log(t),e.next=19;break;case 12:return this.intelligence_model.item.link=this.intelligence_model.guid,r={guid:this.intelligence_model.guid,source_id:this.intelligence_model.source_id,category_id:this.intelligence_model.category_id,published_parsed:(new Date).toISOString(),item:JSON.stringify(this.intelligence_model.item)},e.next=16,_.createResource("resources",r);case 16:return e.next=18,this.refreshResources();case 18:console.log(r);case 19:this.loading=!1;case 20:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),refreshResourcesByCategory:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.date=null,this.category_id=[t],e.next=4,this.refreshResources();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),click_comment:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(" comment"!==this.$refs["comment-button-"+t].innerText){e.next=7;break}this.comment=this.$refs["comment-span-"+t].innerText,this.$refs["comment-span-"+t].style.display="none",this.$refs["comment-textarea-"+t].$el.style.display="",this.$refs["comment-button-"+t].innerHTML='<i class="fas fa-comment"> submit </i>',e.next=16;break;case 7:return this.loading=!0,e.next=10,_.submit_comment(t,this.comment);case 10:this.$refs["comment-span-"+t].style.display="",r.data.comment=this.comment,this.comment="",this.$refs["comment-textarea-"+t].$el.style.display="none",this.$refs["comment-button-"+t].innerHTML='<i class="fas fa-comment"> comment </i>',this.loading=!1;case 16:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),click_todo:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,console.log(t.data.todo),r=parseInt(t.data.todo),this.todo=Math.abs(t.data.todo-1),t.data.todo=this.todo,console.log(t.data.todo),e.next=8,_.submit_todo(t.data.id,t.data.todo,r);case 8:this.loading=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},N=P,V=(r("49a4"),Object(c["a"])(N,S,O,!1,null,"c883bf48",null)),L=V.exports,E=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"todo"}},[r("b-alert",{attrs:{show:e.error.length>0,variant:"warning"}},[e._v(e._s(e.error))]),r("div",{staticClass:"date_select row"},[r("div",{staticClass:"col"}),r("div",{staticClass:"col-1"},[r("b-btn",{on:{click:e.refreshResources}},[r("i",{staticClass:"fas fa-redo-alt"})])],1),r("div",{staticClass:"col-1"},[r("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-1",modifiers:{"modal-1":!0}}],on:{click:function(t){delete e.todo_model["id"]}}},[r("i",{staticClass:"fa fa-plus"})])],1)]),r("b-modal",{attrs:{id:"modal-1","header-bg-variant":e.headerBgVariant,"header-text-variant":e.headerTextVariant,"body-bg-variant":e.bodyBgVariant,"body-text-variant":e.bodyTextVariant,"footer-bg-variant":e.footerBgVariant,"footer-text-variant":e.footerTextVariant},on:{ok:e.handleOk},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v(" "+e._s(e.todo_model.id?"Edit Todo ID#"+e.todo_model.id:"New Todo")+" ")]},proxy:!0}])},[r("b-form-group",{staticClass:"add_intelligence"},[r("b-input-group",{attrs:{prepend:"name"}},[r("b-form-input",{model:{value:e.todo_model.name,callback:function(t){e.$set(e.todo_model,"name",t)},expression:"todo_model.name"}})],1),r("br"),r("b-form-textarea",{attrs:{rows:"3","max-rows":"8"},model:{value:e.todo_model.content,callback:function(t){e.$set(e.todo_model,"content",t)},expression:"todo_model.content"}})],1)],1),r("div",{ref:"waterfall_parent",staticStyle:{"padding-bottom":"20px"}},[r("Waterfall",{ref:"waterfall",attrs:{list:e.resources,gutter:10,width:540,phoneCol:1,backgroundColor:"rgb(73, 74, 95, 0.3)"},scopedSlots:e._u([{key:"item",fn:function(t){return[0===parseInt(t.data.todo_type,10)?r("b-card",{staticClass:"intelligence_card"},[r("b-card-header",[r("p",[t.data.item.hasOwnProperty("author")?r("span",{staticClass:"fas fa-feather-alt",staticStyle:{"padding-right":"10px"}},[e._v(" "+e._s(t.data.item.author.name)+" ")]):e._e(),r("a",{staticClass:"fas fa-external-link-alt",attrs:{target:"_blank",href:t.data.item.link}},[e._v(" "+e._s(t.data.item.title)+" ")])])]),r("b-card-body",[r("i",{staticClass:"fas fa-align-left",staticStyle:{"padding-right":"10px"}}),r("span",{staticClass:"description-span",domProps:{innerHTML:e._s(t.data.item.description)}})]),r("b-card-footer",[r("span",{staticClass:"far fa-clock",staticStyle:{"padding-right":"10px"}},[e._v(" "+e._s(new Date(t.data.published_parsed.replace(" ","T")+"Z").toLocaleString())+" ")]),r("a",{attrs:{href:"/#/intelligence?category_id=["+t.data.category_id+"]"}},[r("span",[r("i",{staticClass:"fas fa-coins"},[e._v(" "+e._s(t.data.category_name)+" ")])])]),r("i",{staticClass:"fab fa-chrome",staticStyle:{"padding-left":"10px","padding-right":"5px"}}),r("span",[e._v(e._s(e.come_from(t.data.guid)))]),r("br"),r("i",{staticClass:"fas fa-hashtag"}),r("span",[e._v(e._s(t.data.item.tags))]),r("a",{staticStyle:{"margin-left":"3px"},attrs:{href:"#"}},[e._v(" #tag1 ")]),r("a",{staticStyle:{"margin-left":"3px"},attrs:{href:"#"}},[e._v(" #tag2 ")]),r("br"),r("div",[r("hr",{directives:[{name:"show",rawName:"v-show",value:t.data.comment.length>0,expression:"props.data.comment.length>0"}],staticStyle:{"border-top":"1px solid rgba(255, 255, 255, 0.4)"}}),r("span",{directives:[{name:"show",rawName:"v-show",value:t.data.comment.length>0,expression:"props.data.comment.length > 0"}],staticStyle:{"font-size":"30px"}},[e._v("“")]),r("span",{ref:"comment-span-"+t.data.id},[e._v(" "+e._s(t.data.comment)+" ")]),r("b-textarea",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"comment-textarea-"+t.data.id,model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}}),r("span",{directives:[{name:"show",rawName:"v-show",value:t.data.comment.length>0,expression:"props.data.comment.length>0"}],staticStyle:{"font-size":"30px"}},[e._v("”")])],1),r("span",{staticStyle:{float:"right"}},[r("b-btn",{on:{click:function(r){return e.click_todo(t)}}},[r("i",{staticClass:"fas fa-clipboard-list",style:1===parseInt(t.data.todo,10)?"color: #82c91e;":""},[e._v(" todo ")])]),r("b-btn",{ref:"comment-button-"+t.data.id,on:{click:function(r){return e.click_comment(t.data.id)}}},[r("i",{staticClass:"fas fa-comment"},[e._v(" comment ")])]),r("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-1",modifiers:{"modal-1":!0}}],staticStyle:{"margin-left":"10px"},on:{click:function(r){return e.populateResourceToEdit(t.data)}}},[r("i",{staticClass:"fas fa-pen"},[e._v(" edit ")])]),r("b-btn",{staticStyle:{"margin-left":"10px"},on:{click:function(r){return e.deleteResource(t.data.id)}}},[r("i",{staticClass:"fas fa-times"},[e._v(" delete ")])])],1)])],1):r("b-card",{staticClass:"intelligence_card"},[r("b-card-header",[r("p",[r("span",[e._v(" "+e._s(t.data.name)+" ")])])]),r("b-card-body",[r("i",{staticClass:"fas fa-align-left",staticStyle:{"padding-right":"10px"}}),r("span",[e._v(" "+e._s(t.data.content)+" ")])]),r("b-card-footer",[r("span",{staticClass:"far fa-clock",staticStyle:{"padding-right":"10px"}},[e._v(" "+e._s(new Date(t.data.add_time.replace(" ","T")+"Z").toLocaleString())+" ")]),r("a",{attrs:{href:"/#/intelligence?category_id="+t.data.category_id}}),r("hr"),r("span",{staticStyle:{float:"right"}},[r("b-btn",{on:{click:function(r){return e.click_todo(t)}}},[r("i",{staticClass:"fas fa-clipboard-list",style:1===parseInt(t.data.todo,10)?"color: #82c91e;":""},[e._v(" todo ")])]),r("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-1",modifiers:{"modal-1":!0}}],staticStyle:{"margin-left":"10px"},on:{click:function(r){return e.populateResourceToEdit(t.data)}}},[r("i",{staticClass:"fas fa-pen"},[e._v(" edit ")])]),r("b-btn",{staticStyle:{"margin-left":"10px"},on:{click:function(r){return e.deleteResource(t.data.id)}}},[r("i",{staticClass:"fas fa-times"},[e._v(" delete ")])])],1)])],1)]}}])})],1)],1)},A=[],B={name:"Todo",components:{Waterfall:j.a,Treeselect:D.a},data:function(){return{items:[],resources:[],error:"",date:null,category_id:[],limit:20,model:[],categories:[{value:1,text:"ca"}],categoriesOptions:[],key:0,value:["apple","orange"],todo_model:{},variants:["primary","secondary","success","warning","danger","info","light","dark"],headerBgVariant:"dark",headerTextVariant:"light",bodyBgVariant:"dark",bodyTextVariant:"dark",footerBgVariant:"dark",footerTextVariant:"dark",tags:[{id:1,name:"linux",label:"linux"},{id:2,name:"windows",label:"windows"}],comment:""}},props:{msg:String},created:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,void 0!==this.$route.query.limit&&(this.limit=this.$route.query.limit),e.next=4,this.refreshResources();case 4:return e.next=6,this.refreshCategories();case 6:this.$refs.waterfall.screenWidth=this.$refs.waterfall.screenWidth-120,this.loading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{loadOptions:function(){return this.categoriesOptions.children},come_from:function(e){return new URL(e).hostname},refreshResources:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,i,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,this.resources=[],t={limit:this.limit},e.next=5,_.listResources("todo",{},t);case 5:for(r=e.sent,a=new DOMParser,n=function(e){var t=r[e];if(0===parseInt(t["todo_type"],10)){var n=JSON.parse(r[e].item),i=a.parseFromString(n.description,"text/html");i.getElementsByTagName("img").forEach((function(e){var r=e.getAttribute("src");if(r.startsWith("/")){var a=new URL(t.guid);e.src=a.protocol+"//"+a.hostname+r}e.referrerPolicy="no-referrer"})),n.description=i.body.innerHTML.substr(0,500),t["item"]=n}s.resources.push(t)},i=0;i<r.length;i++)n(i);this.$router.replace({query:t}).catch((function(e){if("NavigationDuplicated"!==e.name)throw e})),this.loading=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),refreshCategories:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,_.listResources("category");case 3:this.categories=e.sent,t={id:0},this.categoriesOptions=_.generateCategoriesCursive(t,this.categories),this.loading=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),populateResourceToEdit:function(e){this.todo_model={item:{author:{name:""}}},this.todo_model.id=e.id,this.todo_model.guid=e.guid,this.todo_model.source_id=e.source_id,this.todo_model.category_id=e.category_id,this.todo_model.published_parsed=e.published_parsed,this.todo_model.item.title=e.item.title,this.todo_model.item.author.name=e.item.author.name,this.todo_model.item.description=e.item.description},deleteResource:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("clicked"),!confirm("Are you sure you want to delete this todo?")){e.next=7;break}return this.todo_model.id===t&&(this.todo_model={}),e.next=5,_.deleteResource("todo",t);case 5:return e.next=7,this.refreshResources();case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleOk:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,!0!==this.todo_model.hasOwnProperty("id")){e.next=4;break}e.next=9;break;case 4:return t={name:this.todo_model.name,content:this.todo_model.content,add_time:(new Date).toISOString(),todo:1},e.next=7,_.createResource("todo",t);case 7:return e.next=9,this.refreshResources();case 9:this.loading=!1;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),click_comment:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(" comment"!==this.$refs["comment-button-"+t].innerText){e.next=7;break}this.comment=this.$refs["comment-span-"+t].innerText,this.$refs["comment-span-"+t].style.display="none",this.$refs["comment-textarea-"+t].$el.style.display="",this.$refs["comment-button-"+t].innerHTML='<i class="fas fa-comment"> submit </i>',e.next=16;break;case 7:return this.loading=!0,e.next=10,_.submit_comment(t,this.comment);case 10:this.$refs["comment-span-"+t].style.display="",this.$refs["comment-span-"+t].innerText=this.comment,this.comment="",this.$refs["comment-textarea-"+t].$el.style.display="none",this.$refs["comment-button-"+t].innerHTML='<i class="fas fa-comment"> comment </i>',this.loading=!1;case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),click_todo:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,console.log(t.data.todo),this.todo=Math.abs(t.data.todo-1),t.data.todo=this.todo,console.log(t.data.todo),e.next=7,_.submit_todo(t.data.id,t.data.todo,parseInt(t.data.todo_type,10));case 7:this.loading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},M=B,U=(r("47b3"),Object(c["a"])(M,E,A,!1,null,"501a1f58",null)),H=U.exports,q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-alert",{attrs:{show:e.loading,variant:"info"}},[e._v("Loading...")]),r("div",{staticStyle:{"padding-left":"20px","padding-bottom":"10px"}},[r("span",[e._v("last time fetch: "+e._s(new Date(e.last_update).toLocaleString()))]),r("b-btn",{staticStyle:{"margin-left":"10px"},attrs:{variant:"info"},on:{click:function(t){return e.refresh()}}},[r("i",{staticClass:"fas fa-redo-alt"}),e._v(" refresh ")])],1),r("b-row",{staticClass:"no-margin-right padding-left"},[r("b-col",[r("table",{staticClass:"table table-striped table-resources-list"},[r("thead",[r("tr",[r("th",[e._v("Id")]),r("th",[e._v("FeedURL")]),r("th",[e._v("Author")]),r("th",[e._v("Category")]),r("th",[e._v("Status")]),r("th",[e._v("Action")])])]),r("tbody",e._l(e.sources,(function(t){return r("tr",{key:t.id},[r("td",[e._v(e._s(t.id))]),r("td",[e._v(e._s(t.feed_url))]),r("td",[e._v(e._s(t.author))]),r("td",[e._v(e._s(t.category_id))]),r("td",["1"===t.fetch_status?r("i",{staticClass:"fas fa-smile-wink",staticStyle:{color:"greenyellow"}}):r("i",{staticClass:"far fa-frown",staticStyle:{color:"red"}})]),r("td",[r("a",{staticClass:"fa fa-pen",attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),e.populateResourceToEdit(t)}}}),r("a",{staticClass:"fa fa-times",staticStyle:{"padding-left":"15px"},attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),e.deleteResource(t.id)}}})])])})),0)])]),r("b-col",{attrs:{lg:"4"}},[r("div",{staticClass:"add_resource"},[r("b-input-group",{attrs:{prepend:"source"}},[r("b-input",{model:{value:e.model.feed_url,callback:function(t){e.$set(e.model,"feed_url",t)},expression:"model.feed_url"}}),r("b-button",{attrs:{variant:"outline-primary"},on:{click:e.parse}},[e._v("parse")])],1),r("br"),e.parse_result.toString().length>0&&e.parse_result.hasOwnProperty("image")?r("img",{attrs:{src:e.parse_result.image.url,alt:""}}):e._e(),e.parse_result.toString().length>0?r("p",[e._v(" [title] "),r("a",{attrs:{href:e.parse_result.link,target:"_blank"}},[e._v(e._s(e.parse_result.title))]),e._v(" "),e.parse_result.hasOwnProperty("author")?r("i",{staticClass:"fas fa-pen"},[e._v("[author] "+e._s(e.parse_result.author.name))]):e._e(),e._v(" "),e.parse_result.hasOwnProperty("author")?r("i",{staticClass:"fas fa-envelope"},[e._v("[email] "+e._s(e.parse_result.author.email))]):e._e()]):e._e(),e.parse_result.toString().length>0?r("p",[e._v("[updatedParsed] "+e._s(e.parse_result.updatedParsed)+" [generator] "+e._s(e.parse_result.generator)+" [feedType] "+e._s(e.parse_result.feedType)+" [feedVersion] v"+e._s(e.parse_result.feedVersion))]):e._e(),e.parse_result.toString().length>0?r("p",[e._v(e._s(e.parse_result.description))]):e._e(),r("treeselect",{attrs:{placeholder:"select category",multiple:!0,options:e.categoriesOptions.children},model:{value:e.model.category_id,callback:function(t){e.$set(e.model,"category_id",t)},expression:"model.category_id"}}),r("br"),e.model.id?r("div",[r("b-input-group",{attrs:{prepend:"Author"}},[r("b-input",{model:{value:e.model.author,callback:function(t){e.$set(e.model,"author",t)},expression:"model.author"}})],1),r("br")],1):e._e(),r("b-btn-group",[r("b-button",{attrs:{variant:"outline-primary"},on:{click:e.saveResource}},[e._v(e._s(e.model.id?"Save":"Add")+" ")]),r("b-btn",{attrs:{variant:"outline-primary"},on:{click:function(t){e.model={}}}},[e._v("Reset")])],1)],1)])],1)],1)},J=[],W={name:"Source",components:{Treeselect:D.a},data:function(){return{model:{},parse_result:"",loading:!1,url:"",sources:[],categories:["ca"],categoriesOptions:[],last_update:"have not"}},created:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.refreshResources();case 3:return e.next=5,this.refreshCategories();case 5:return e.next=7,this.refreshLastUpdate();case 7:this.loading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{refreshResources:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,_.listResources("sources");case 3:this.sources=e.sent,this.loading=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),refreshCategories:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,_.listResources("category");case 3:t=e.sent,r={id:0},this.categoriesOptions=_.generateCategoriesCursive(r,t),console.log(this.categoriesOptions.children),this.loading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),refreshLastUpdate:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,_.refreshLastUpdate();case 3:t=e.sent,this.last_update=t.last_update,this.loading=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),parse:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,_.parse_source(this.model.feed_url).then((function(e){t.parse_result=e}));case 3:this.loading=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),saveResource:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,this.model.parent=parseInt(this.model.id),this.model.category_id=this.model.category_id[0],!this.model.id){e.next=9;break}return this.model.fetch_status="1"===this.model.fetch_status,e.next=7,_.updateResource("sources",this.model.id,this.model);case 7:e.next=11;break;case 9:return e.next=11,_.createResource("sources",this.model);case 11:return this.model={},e.next=14,this.refreshResources();case 14:this.loading=!1;case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),populateResourceToEdit:function(e){this.model=Object.assign({},e)},deleteResource:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Are you sure you want to delete this source?")){e.next=6;break}return this.model.id===t&&(this.model={}),e.next=4,_.deleteResource("source",t);case 4:return e.next=6,this.refreshResources();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),refresh:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,_.refresh();case 3:this.loading=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},z=W,F=(r("6702"),Object(c["a"])(z,q,J,!1,null,"3a4cf3fa",null)),G=F.exports,Z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-alert",{attrs:{show:e.loading,variant:"info"}},[e._v("Loading...")]),r("b-row",{staticClass:"no-margin-right padding-left"},[r("b-col",[r("table",{staticClass:"table table-striped table-resources-list"},[r("thead",[r("tr",[r("th",[e._v("Id")]),r("th",[e._v("Name")]),r("th",[e._v("Parent")]),r("th",[e._v("action")])])]),r("tbody",e._l(e.resources,(function(t){return r("tr",{key:t.id},[r("td",[e._v(e._s(t.id))]),r("td",[e._v(e._s(t.name))]),r("td",[e._v(e._s(t.parent))]),r("td",[r("a",{staticClass:"fa fa-pen",attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),e.populateResourceToEdit(t)}}}),r("a",{staticClass:"fa fa-times",staticStyle:{"padding-left":"15px"},attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),e.deleteResource(t.id)}}})])])})),0)])]),r("b-col",{attrs:{lg:"4"}},[r("div",{staticClass:"add_resource"},[r("b-card",{attrs:{title:e.model.id?"Edit Category ID#"+e.model.id:"New Category"}},[r("b-input-group",{attrs:{prepend:"name"}},[r("b-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),r("br"),r("treeselect",{attrs:{placeholder:"select parent",multiple:!0,options:e.categoriesOptions.children},model:{value:e.model.parent,callback:function(t){e.$set(e.model,"parent",t)},expression:"model.parent"}}),r("br"),e.model.hasOwnProperty("parent")?r("p",[e._v("selected: "+e._s("string"===typeof e.model.parent?e.model.parent:e.model.parent[0]))]):e._e(),r("b-btn-group",[r("b-btn",{attrs:{variant:"outline-primary"},on:{click:e.saveResource}},[e._v(" "+e._s(e.model.id?"Save":"Add")+" ")]),r("b-btn",{attrs:{variant:"outline-primary"},on:{click:function(t){e.model={}}}},[e._v("Reset")])],1)],1)],1)])],1)],1)},K=[],Q={name:"Category",components:{Treeselect:D.a},data:function(){return{model:{},loading:!1,url:"",resources:[],categories:[{value:1,text:"ca"}],categoriesOptions:[]}},created:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.refreshResources();case 3:return e.next=5,this.refreshCategories();case 5:this.loading=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{refreshResources:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,_.listResources("category");case 3:this.resources=e.sent,this.loading=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),refreshCategories:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loading=!0,t={id:0},this.categoriesOptions=_.generateCategoriesCursive(t,this.resources),console.log(this.categoriesOptions.children),this.loading=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),saveResource:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,!0===this.model.hasOwnProperty("parent")?this.model.parent=parseInt(this.model.parent[0]):this.model.parent=0,!this.model.id){e.next=7;break}return e.next=5,_.updateResource("category",this.model.id,this.model);case 5:e.next=9;break;case 7:return e.next=9,_.createResource("category",this.model);case 9:return this.model={},e.next=12,this.refreshResources();case 12:return e.next=14,this.refreshCategories();case 14:this.loading=!1;case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),populateResourceToEdit:function(e){this.model=Object.assign({},e)},deleteResource:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Are you sure you want to delete this category?")){e.next=6;break}return this.model.id===t&&(this.model={}),e.next=4,_.deleteResource("category",t);case 4:return e.next=6,this.refreshResources();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},X=Q,Y=(r("8c74"),Object(c["a"])(X,Z,K,!1,null,"f8454134",null)),ee=Y.exports,te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-alert",{attrs:{show:e.loading,variant:"info"}},[e._v("Loading...")]),r("b-row",{staticClass:"no-margin-right padding-left"},[r("b-col",[r("table",{staticClass:"table table-striped table-resources-list"},[r("thead",[r("tr",[r("th",[e._v("Id")]),r("th",[e._v("Name")]),r("th",[e._v("Action")])])]),r("tbody",e._l(e.resources,(function(t){return r("tr",{key:t.id},[r("td",[e._v(e._s(t.id))]),r("td",[e._v(e._s(t.name))]),r("td",[r("a",{staticClass:"fa fa-pen",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.populateResourceToEdit(e.category)}}}),r("a",{staticClass:"fa fa-times",staticStyle:{"padding-left":"15px"},attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.deleteResource(e.category.id)}}})])])})),0)])])],1)],1)},re=[],ae={name:"Tag",data:function(){return{model:{},loading:!1,url:"",resources:[]}},created:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.refreshResources();case 3:this.loading=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{refreshResources:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,_.listResources("tag");case 3:this.resources=e.sent,this.loading=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},ne=ae,ie=(r("1087"),Object(c["a"])(ne,te,re,!1,null,"173d0288",null)),se=ie.exports;a["default"].use(d["a"]);var oe=new d["a"]({routes:[{path:"/",name:"Index",component:C},{path:"/intelligence",name:"Intelligence",component:L},{path:"/todo",name:"Todo",component:H},{path:"/source",name:"Source",component:G},{path:"/category",name:"Category",component:ee},{path:"/tag",name:"Tag",component:se}]}),ce=r("4776"),le=r.n(ce),ue=(r("b15b"),r("ec7e")),de=r.n(ue),he=r("5f5b");r("f9e3"),r("2dd8");a["default"].use(de.a),a["default"].use(le.a),a["default"].config.productionTip=!1,a["default"].use(he["a"]),new a["default"]({router:oe,render:function(e){return e(u)}}).$mount("#app")},6702:function(e,t,r){"use strict";var a=r("00fb"),n=r.n(a);n.a},"7f5c":function(e,t,r){},"85ec":function(e,t,r){},"8c74":function(e,t,r){"use strict";var a=r("3970"),n=r.n(a);n.a},"9e81":function(e,t,r){},"9ff6":function(e,t,r){},b96d:function(e,t,r){}});
//# sourceMappingURL=app.954bfb13.js.map